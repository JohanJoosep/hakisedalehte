<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Küberoskuste treenimis lehekülg" />
    <title>H&auml;ki seda lehek&uuml;lge</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        header {
            background: #333;
            color: #fff;
            padding: 1rem 0;
        }
        main {
            padding: 1.5rem;
        }
    </style>
</head>
<body>
    <header>
        <button onclick="window.location.href='https://johanjoosep.github.io/hakisedalehte/';">Kodu</button>
    </header>
    <main>
        <h2>Tase 4</h2>
        <p>Siin on krüpteeritud sõnum. Püüa aru saada, millist šifreeringut kasutati ja sisesta õige parool!</p>
        <p><strong>Krüpteeritud tekst:</strong> "ptkqjn"</p>
        <input type="text" id="passwordBox" placeholder="Sisesta parool" />
        <button onclick="checkPassword()">Kontrolli</button>

        <p id="message" style="display: none; color: green; font-weight: bold;">Hea töö!</p>
        <button id="newButton" style="display: none;" onclick="window.location.href='https://johanjoosep.github.io/hakisedalehte/tase5.html';">Tase 5</button>

        <h3>Proovi ise krüpteerida:</h3>
        <input type="text" id="plainText" placeholder="Sisesta tavaline tekst" />
        <button onclick="encryptUserInput()">Krüpteeri</button>
        <p id="encryptedOutput"></p>
    </main>

    <script>
        function caesarEncrypt(text, shift) {
            return text.split('').map(char => {
                if (char.match(/[a-z]/)) {
                    let code = char.charCodeAt(0);
                    let newCode = ((code - 97 + shift) % 26) + 97;
                    return String.fromCharCode(newCode);
                } else {
                    return char;
                }
            }).join('');
        }

        function checkPassword() {
            const userInput = document.getElementById('passwordBox').value.trim().toLowerCase();
            const correctAnswer = "koflei";
            const messageEl = document.getElementById('message');
            const newButton = document.getElementById('newButton');

            if (userInput === correctAnswer) {
                messageEl.style.display = 'block';
                newButton.style.display = 'inline-block';
            } else {
                alert("❌ Vale parool! Proovi uuesti.");
                messageEl.style.display = 'none';
                newButton.style.display = 'none';
            }
        }

        function encryptUserInput() {
            const plainText = document.getElementById('plainText').value.trim().toLowerCase();
            const encrypted = caesarEncrypt(plainText, 5);
            document.getElementById('encryptedOutput').textContent = `Krüpteeritud tekst: ${encrypted}`;
        }
    </script>
</body>
</html>
